---
id: 2019-04-25-VimTabs.md
author: Anon
layout: post
title: Vim：tab设置
date: 2019/4/25
categories: Vim
tags: 
description: 清晰地解释Vim中的tabstop，softtabstop，expandtab等。
---


* content
{:toc}

## 字面意思

#### tabstop

一个`\t`被解释成的长度


___


#### expandtab

是否将**从Vim输入的**`\t`转换成空格

#### softtabstop

不启用：    `softtabstop=0`
启用：      `softtabstop=X`（X为任意大于零的整数）

## 综合理解

> set ts=5 noet sts=0

单纯设置一个`\t`长度是5，不把其转化为空格，也不启用软tab。

效果：
1. 文件中所有的`\t`解释成5个长度。
2. 在插入模式按下`tab`键则插入一个`\t`(5个长度)。
                             
**（绝大多数情况下）如何区分`\t`还是空格：** 在normal模式，移动光标空格是一个长度，`\t`不是。

> set ts=5 et sts=0

单纯设置一个`\t`长度是5，并把 **在Vim中键入的`tab`** 从原来的`\t`转换成相应长度的空格。
效果：
1. 原文中有的`\t`还是5个长度，并且记为`\t`。
2. 再insert模式插入的tab，将被记作5个长度的空格。（这个模式下，绝大多是使用是无法键入`\t`的）

___


> set ts=5 noet sts=3

**强烈建议开启`eol`学习`:set list`（会显示出eol，同时会把`\t`以一个字符的形式显示）** 

注意，从insert模式切换成normal模式光标会前移1位。


softtabstop可以类似于一个更高层级的解决方案，他将全面接管`\t`的输入，**它并不会影响`\t`被解释成多长**。（如果你设置了softtabstop，你将无法裸露地直接创造一个`\t`，除非你将softtabstop和tabstop设置相同）

效果：
1. 因为sts小于ts，所以`tab`键入的将全部是空格。
2. 键入`tab`后，当前光标的位置前一定有**最小整数倍的sts**的空余长度。
    1. 如果是新的一行，开始时候光表示在`eol`即第一列，那`tab`后光标将会在第6列（前面有`1*5`列文件实质内容共有5列，光标在`eol`）。
    2. 如果光标在第2列，那之后光标也将停留在第6列。
** 3. 键入`tab`时，会自动整理前方的空格(直到遇到一个非空格字符)，符合sts长度将转换成一个`\t`。 没有键入`tab`处的空格不会被整理。**
4. `backspace`
    1. 在insert模式，当键入完`tab`后（当前光标一定在 n * sts + 1列处），立刻键入`backspace`，你会发现虽然前面的是空格，也会**直接回退sts格**。
        1. 键入完`tab`后，若再键入**任意**长度空格，再直接`backspace`，它就无法再识别上次`tab`后停在何处，因此将逐一删除**字符**。
    2. 在进入insert模式后，若不键入任何字符，直接`backspace`，那将“格杀勿论”。
        1. 所有字符将逐一被删除，直到当前光标位于（n * sts + 1列（而不是字符）处）。
        2. 若是非空显示的字符，将正常逐一删除，之后回到步骤 1 往复。
        3. 之后（前方有大量空白显示的字符，且当前光标位置满足步骤 1），将每次 **sts列** 的删除。
        4. 遇到`\t`会直接删除**ts列**，因此有可能一次删除的列数会大于**sts**。
        
> set ts=5 noet sts=6

不论如何，最后表现出来的`tab`都是6列为一个单位。单次键入的将会是`\t空格`。

效果：

1. 同上，同样每次键入后都将会**整理**，使得前方的空白列显示成`n个\t和小于5个的空格`的形式并确保光标前的总空格数是6的倍数。
2. 删除部分同上。

> set ts=5 et sts=3

将不存在 **键入`tab`后整理生成`\t`** 的环节，其余同上。

## 如何配置

因为我的屏幕不够宽，所以我希望外部文件里的`\t`可以紧凑一些。

> set ts=4

因为我无法确保在其他的editor里，`\t`的长度可以同样的被解释成我满意的长度，同时我也不想在花心思去设置他们的配置（**这样会让源码文件大多少，还需要测试**）。

> set et

但是我想要快速删除空格的效果，并且我想我键入的`tab`和原有的`\t`看起来一样。

> set sts=4


